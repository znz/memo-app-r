name: Update rubocop gems
on:
  workflow_dispatch:

permissions:
  contents: read

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@b4ffde65f46336ab88eb53be808477a3936bae11 # v4.1.1
    - name: git config
      run: |
        git config user.name github-actions
        git config user.email github-actions@github.com

    - uses: ruby/setup-ruby@22fdc77bf4148f810455b226c90fb81b5cbc00a7
      with:
        bundler-cache: true
    - run: |
        bundle update $(git grep -ho 'rubocop[-a-z_]*' Gemfile)
        git commit -m 'Update rubocop-* gem' Gemfile.lock
        git show HEAD
